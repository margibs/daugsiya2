{"version":3,"sources":["ezslots.js","jquery.unveil.js","jquery.easing.1.3.js","jquery.leanModal.min.js","home.js","jquery.lazyimage.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5MA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["function EZSlots(id,useroptions){\n\tvar that = this; //keep reference to function for use in callbacks\n\t//set some variables from the options, or with defaults.\n\tvar options = useroptions ? useroptions : {};\n\tthis.reelCount = options.reelCount ? options.reelCount : 3; //how many reels, assume 3 \n\tthis.symbols = options.symbols ? options.symbols : ['A','B','C'];\n\tthis.sameSymbolsEachSlot = true;\n\tthis.winningSet = options.winningSet;\n\tthis.width = options.width ? options.width : 100;\n\tthis.height = options.width ? options.height : 100;\n\tthis.howManySymbolsToAppend = 20; //how many symbols each spin adds\n\tthis.endingLocation = 7; //location for selected symbol... needs to be a few smaller than howManySymbolsToAppend\n\tthis.time = 2500; //time in millis for a spin to take\n\tthis.jqo = $(\"#\"+id); //jquery object reference to main wrapper\n\tthis.jqoSliders = []; //jquery object reference to strips sliding up and down\n\n\t//to initialize we construct the correct number of slot windows\n\t//and then populate each strip once\n\tthis.init = function(){\n\t\tthis.jqo.addClass(\"ezslots\"); //to get the css goodness\n\t\t//figure out if we are using the same of symbols for each window - assume if the first \n\t\t//entry of the symbols is not a string we have an array of arrays\n\t\tif(typeof this.symbols[0] != 'string'){\n\t\t\tthis.sameSymbolsEachSlot = false;\n\t\t}\n\t\t//make each slot window\n\t\tfor(var i = 0; i < this.reelCount; i++){\n\t\t\tvar jqoSlider = $('<div class=\"slider\"></div>');\n\t\t\tvar jqoWindow = $('<div class=\"window window_\"'+i+'></div>');\n\t\t\tthis.scaleJqo(jqoWindow).append(jqoSlider); //make window right size and put slider in it\n\t\t\tthis.jqo.append(jqoWindow); //add window to main div\n\t\t\tthis.jqoSliders.push(jqoSlider); //keep reference to jqo of slider\n\t\t\tthis.addSymbolsToStrip(jqoSlider,i); //and add the initial set \n\t\t}\n\t};\n\t//convenience function since we need to apply width and height to multiple parts\n\tthis.scaleJqo = function(jqo){\n\t\tjqo.css(\"height\",this.height+\"px\").css(\"width\",this.width+\"px\");\n\t\treturn jqo;\n\t}\n\t//add the various symbols - but take care to possibly add the \"winner\" as the symbol chosen\n\tthis.addSymbolsToStrip = function(jqoSlider, whichReel, shouldWin){\n\t\tvar symbolsToUse = that.sameSymbolsEachSlot ? that.symbols : that.symbols[whichReel];\n\t\tvar chosen =  shouldWin ? that.winningSet[whichReel] : Math.floor(Math.random()*symbolsToUse.length);\n\t\tfor(var i = 0; i < that.howManySymbolsToAppend; i++){\n\t\t\tvar ctr = (i == that.endingLocation) ? chosen : Math.floor(Math.random()*symbolsToUse.length);\n\t\t\t//we nest \"content\" inside of \"symbol\" so we can do vertical and horizontal centering more easily\n\t\t\tvar jqoContent = $(\"<div class='content'>\"+symbolsToUse[ctr]+\"</div>\");\n\t\t\tthat.scaleJqo(jqoContent);\n\t\t\tvar jqoSymbol = $(\"<div class='symbol'></div>\");\n\t\t\tthat.scaleJqo(jqoSymbol);\n\t\t\tjqoSymbol.append(jqoContent);\n\t\t\tjqoSlider.append(jqoSymbol);\n\t\t}\n\t\treturn chosen;\n\t}\n\t//to spin, we add symbols to a strip, and then bounce it down\n\tthis.spinOne = function(jqoSlider,whichReel,shouldWin){\n\t\tvar heightBefore = parseInt(jqoSlider.css(\"height\"), 10); \n\t\tvar chosen = that.addSymbolsToStrip(jqoSlider,whichReel,shouldWin);\n\t\tvar marginTop = -(heightBefore + ((that.endingLocation) * that.height));\n\t\tjqoSlider.stop(true,true).animate(\n\t\t\t{\"margin-top\":marginTop+\"px\"},\n\t\t\t{'duration' : that.time + Math.round(Math.random()*1000), 'easing' : \"easeOutElastic\"});\n\t\treturn chosen;\n\t}\n\n\tthis.spinAll = function(shouldWin){\n\t\tvar results = [];\n\t\tfor(var i = 0; i < that.reelCount; i++){\n\t\t\t\tresults.push(that.spinOne(that.jqoSliders[i],i,shouldWin));\n\t\t\t}\n\t\treturn results;\n\t}\n\n\tthis.init();\n\treturn {\n\t\tspin : function(){\n\t\t\treturn that.spinAll();\n\t\t},\n\t\twin : function(){\n\t\t\treturn that.spinAll(true);\n\t\t}\n\t}\n}\n\n\n","/**\n * jQuery Unveil\n * A very lightweight jQuery plugin to lazy load images\n * http://luis-almeida.github.com/unveil\n *\n * Licensed under the MIT license.\n * Copyright 2013 Luís Almeida\n * https://github.com/luis-almeida\n */\n\n;(function($) {\n\n  $.fn.unveil = function(threshold, callback) {\n\n    var $w = $(window),\n        th = threshold || 0,\n        retina = window.devicePixelRatio > 1,\n        attrib = retina? \"data-src-retina\" : \"data-src\",\n        images = this,\n        loaded;\n\n    this.one(\"unveil\", function() {\n      var source = this.getAttribute(attrib);\n      source = source || this.getAttribute(\"data-src\");\n      if (source) {\n        this.setAttribute(\"src\", source);\n        if (typeof callback === \"function\") callback.call(this);\n      }\n    });\n\n    function unveil() {\n      var inview = images.filter(function() {\n        var $e = $(this);\n        if ($e.is(\":hidden\")) return;\n\n        var wt = $w.scrollTop(),\n            wb = wt + $w.height(),\n            et = $e.offset().top,\n            eb = et + $e.height();\n\n        return eb >= wt - th && et <= wb + th;\n      });\n\n      loaded = inview.trigger(\"unveil\");\n      images = images.not(loaded);\n    }\n\n    $w.on(\"scroll.unveil resize.unveil lookup.unveil\", unveil);\n\n    unveil();\n\n    return this;\n\n  };\n\n})(window.jQuery || window.Zepto);\n","/*\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\n *\n * Uses the built in easing capabilities added In jQuery 1.1\n * to offer multiple easing options\n *\n * TERMS OF USE - jQuery Easing\n * \n * Open source under the BSD License. \n * \n * Copyright © 2008 George McGinley Smith\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n*/\n\n// t: current time, b: begInnIng value, c: change In value, d: duration\njQuery.easing['jswing'] = jQuery.easing['swing'];\n\njQuery.extend( jQuery.easing,\n{\n\tdef: 'easeOutQuad',\n\tswing: function (x, t, b, c, d) {\n\t\t//alert(jQuery.easing.default);\n\t\treturn jQuery.easing[jQuery.easing.def](x, t, b, c, d);\n\t},\n\teaseInQuad: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\teaseOutQuad: function (x, t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\teaseInOutQuad: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 * ((--t)*(t-2) - 1) + b;\n\t},\n\teaseInCubic: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\teaseOutCubic: function (x, t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\teaseInOutCubic: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\teaseInQuart: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t*t + b;\n\t},\n\teaseOutQuart: function (x, t, b, c, d) {\n\t\treturn -c * ((t=t/d-1)*t*t*t - 1) + b;\n\t},\n\teaseInOutQuart: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n\t\treturn -c/2 * ((t-=2)*t*t*t - 2) + b;\n\t},\n\teaseInQuint: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t*t*t + b;\n\t},\n\teaseOutQuint: function (x, t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t*t*t + 1) + b;\n\t},\n\teaseInOutQuint: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t*t*t + 2) + b;\n\t},\n\teaseInSine: function (x, t, b, c, d) {\n\t\treturn -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n\t},\n\teaseOutSine: function (x, t, b, c, d) {\n\t\treturn c * Math.sin(t/d * (Math.PI/2)) + b;\n\t},\n\teaseInOutSine: function (x, t, b, c, d) {\n\t\treturn -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n\t},\n\teaseInExpo: function (x, t, b, c, d) {\n\t\treturn (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n\t},\n\teaseOutExpo: function (x, t, b, c, d) {\n\t\treturn (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\teaseInOutExpo: function (x, t, b, c, d) {\n\t\tif (t==0) return b;\n\t\tif (t==d) return b+c;\n\t\tif ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\treturn c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\teaseInCirc: function (x, t, b, c, d) {\n\t\treturn -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;\n\t},\n\teaseOutCirc: function (x, t, b, c, d) {\n\t\treturn c * Math.sqrt(1 - (t=t/d-1)*t) + b;\n\t},\n\teaseInOutCirc: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n\t\treturn c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n\t},\n\teaseInElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\teaseOutElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\treturn a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n\t},\n\teaseInOutElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\tif (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\teaseInBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\teaseOutBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\teaseInOutBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158; \n\t\tif ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\teaseInBounce: function (x, t, b, c, d) {\n\t\treturn c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;\n\t},\n\teaseOutBounce: function (x, t, b, c, d) {\n\t\tif ((t/=d) < (1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if (t < (2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if (t < (2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\teaseInOutBounce: function (x, t, b, c, d) {\n\t\tif (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;\n\t\treturn jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t}\n});\n\n/*\n *\n * TERMS OF USE - EASING EQUATIONS\n * \n * Open source under the BSD License. \n * \n * Copyright © 2001 Robert Penner\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n */","// leanModal v1.1 by Ray Stone - http://finelysliced.com.au\n// Dual licensed under the MIT and GPL\n\n(function($){$.fn.extend({leanModal:function(options){var defaults={top:100,overlay:0.5,closeButton:null};var overlay=$(\"<div id='lean_overlay'></div>\");$(\"body\").append(overlay);options=$.extend(defaults,options);return this.each(function(){var o=options;$(this).click(function(e){var modal_id=$(this).attr(\"href\");$(\"#lean_overlay\").click(function(){close_modal(modal_id)});$(o.closeButton).click(function(){close_modal(modal_id)});var modal_height=$(modal_id).outerHeight();var modal_width=$(modal_id).outerWidth();\n$(\"#lean_overlay\").css({\"display\":\"block\",opacity:0});$(\"#lean_overlay\").fadeTo(200,o.overlay);$(modal_id).css({\"display\":\"block\",\"position\":\"fixed\",\"opacity\":0,\"z-index\":11000,\"left\":50+\"%\",\"margin-left\":-(modal_width/2)+\"px\",\"top\":o.top+\"px\"});$(modal_id).fadeTo(200,1);e.preventDefault()})});function close_modal(modal_id){$(\"#lean_overlay\").fadeOut(200);$(modal_id).css({\"display\":\"none\"})}}})})(jQuery);\n","$(function(){\n\n\tBASE_URL = $('meta[name=\"baseURL\"]').attr('content');\n\tCSRF_TOKEN = $('meta[name=\"csrf-token\"]').attr('content');\n\tsocket = io.connect(BASE_URL+':8891');\n\tdefaultProfilePic = BASE_URL+'/images/default_profile_picture.png';\n\n\t//USER DETAILS\n\tuserImage = $('#userId').data('image');\n\tuserId = $('#userId').val();\n    userName = $('#userId').data('name');\n    isAdmin = $('#userId').data('isAdmin') == 1 ? true : false;\n    sessionId = $('#sessionId').val();\n    //END USER DETAILS\n\n    var profileUrl = BASE_URL+'/profile',\n    \tnotifUrl = BASE_URL+'/notification',\n    \tmessageUrl = BASE_URL+'/message',\n    \tfriendUrl = BASE_URL+'/friends';\n\n\t$.fn.preload = function() {\n\t\tthis.each(function(){\n\t\t\t$('<img/>')[0].src = this;\n\t\t});\n\t}\n\n\t$(['http://susanwins.com/uploads/64878_click-header.png']).preload();\n\n\n\t//SOCKET ON\n\n\tsocket.on('user_logged_in', function(){\n\t\tlocation.reload();\n\t});\n\n\tsocket.on('user_logged_out', function(){\n\t\tlocation.reload();\n\t});\n\n\tsocket.on('connect', function(){\n\n\t\tif(userId)\n\t\t{\n\t\t  socket.emit('login', { user_id : userId , profile_picture : userImage, name : userName, session_id : sessionId }, false, isAdmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t  socket.emit('look_at_room', sessionId);\n\t\t}\n\n\t});\n\n\n\tsocket.on('user_banned', function(data, room_id){\n\t\tconsole.log('user_banned');\n\t\tconsole.log($('#chatbox-'+room_id));\n\t\tconsole.log($('#chatbox-'+room_id).length);\n      if(data.user_id == userId && $('#chatbox-'+room_id).length ){\n        $('#chatbox-'+room_id).find('textarea').initBan(data.time);\n        $('#')\n      }\n\n   });\n\n\n   socket.on('lift_ban', function(user_id, room_id){\n      console.log('lift_ban');\n      console.log(user_id);\n      console.log(room_id);\n      if(user_id == userId && $('#chatbox-'+room_id).length){\n        \n        clearInterval($('#chatbox-'+room_id).find('textarea').data('time_interval'));\n        $('#chatbox-'+room_id).find('textarea').attr('placeholder', 'Type Message').removeAttr('disabled');\n\n      }\n\n   });\n\n\n   $.fn.initBan = function(time){\n\n        function millisToMinutesAndSeconds(millis) {\n          var minutes = Math.floor(millis / 60000);\n          var seconds = ((millis % 60000) / 1000).toFixed(0);\n          return minutes + \":\" + (seconds < 10 ? '0' : '') + seconds;\n        }\n\n        function countRemaining(input){\n\n          remaining_time = $(input).data('remaining_time');\n\n          remaining_time = remaining_time - 1000;\n\n          if(remaining_time > 0){\n\n            $(input).data('remaining_time', remaining_time);\n            $(input).removeData('remaining_time').data('remaining_time', remaining_time);\n             $(input).attr('placeholder' ,'Banned for '+millisToMinutesAndSeconds(remaining_time)).attr('disabled', 'disabled');\n\n          }else{\n            clearInterval($(input).data('time_interval'));\n            $(input).attr('placeholder', 'Type Message').removeAttr('disabled');\n          }\n\n          \n\n        }\n\n        return this.each(function(){\n\n          input = this;\n\n          $(input).attr('disabled', 'disabled');\n\n          $(input).removeData('remaining_time').data('remaining_time', time);\n\n          $(input).attr('placeholder' ,'Banned for '+millisToMinutesAndSeconds(time));\n\n          if($(input).data('time_interval')){\n\n            clearInterval($(input).data('time_interval'));\n\n          }\n\n          $(input).data('time_interval', \n\n            setInterval(countRemaining, 1000, input)\n\n            )\n\n\n\n        });\n\n      }\n\n\n\n\tsocket.on('post_recommendGame_notification', function(friend){\n\n\t\tconsole.log('post_recommendGame_notification');\n\n\t\tspan = $('<span>').addClass('notifcount');\n\t\tnotifcount = 1;\n\n\t\tif($('#unreadUserNotification').find('.notifcount').length)\n\t\t{\n\t\t  notifcount = parseInt($('#unreadUserNotification').find('.notifcount').text())+1;\n\t\t}\n\n\t\t$('#unreadUserNotification').html('').append($(span).text(notifcount));\n\n\n\t\t$('#myNotifications').prepend(\n\t\t  $('<li>').append(\n\t\t    $('<a href=\"'+BASE_URL+'/'+friend.game.slug+'\">').addClass('unread')\n\t\t    .append(\n\t\t      $('<img>').attr('src', friend.user.user_detail.profile_picture ? BASE_URL+'/'+friend.user.user_detail.profile_picture : defaultProfilePic )\n\t\t    )\n\t\t    .append(\n\t\t      $('<p>')\n\t\t      .append(\n\t\t        $('<span>').addClass('name').text(friend.user.user_detail.firstname+' '+friend.user.user_detail.lastname+' recommended you to play. ')\n\t\t      )\n\t\t      .append(\n\t\t        $('<div>').addClass('actionList')\n\t\t        .append(\n\t\t          $('<span>').text('Click to Play')\n\t\t        )\n\t\t      )\n\t\t    )\n\t\t  )\n\t\t);\n\t});\n\n\tsocket.on('post_accepted_friend_notification', function(friend){\n\t\tspan = $('<span>').addClass('notifcount');\n\t\tnotifcount = 1;\n\n\t\tif($('#unreadUserNotification').find('.notifcount').length)\n\t\t{\n\t\t  notifcount = parseInt($('#unreadUserNotification').find('.notifcount').text())+1;\n\t\t}\n\n\t\t$('#unreadUserNotification').html('').append($(span).text(notifcount));\n\n\t\t$('#myNotifications').prepend(\n\t\t  $('<li>').append(\n\t\t    $('<a href=\"javascript:;\">').addClass('unread')\n\t\t    .append(\n\t\t      $('<img>').attr('src', friend.profile_picture ? BASE_URL+'/'+friend.profile_picture : defaultProfilePic )\n\t\t    )\n\t\t    .append(\n\t\t      $('<p>')\n\t\t      .append(\n\t\t        $('<span>').addClass('name').text('You and '+friend.name+' are now friends!')\n\t\t      )\n\t\t      .append(\n\t\t        $('<div>').addClass('actionList').data('user', friend.user_id)\n\t\t        .append(\n\t\t          $('<button>').text('Message').addClass('subModalToggle pmFriend').attr('data-target', '#pmBox')\n\t\t        )\n\t\t      )\n\t\t    )\n\t\t  )\n\t\t);\n\t});\n\n\tsocket.on('post_global_notification', function(notification){\n\n\t  console.log('post_global_notification');\n\t  console.log(notification);\n\n\t  if(notification)\n\t  {\n\t    span = $('<span>').addClass('notifcount');\n\t    notifcount = 1;\n\n\t    if($('#unreadGlobalNotification').find('.notifcount').length)\n\t    {\n\t      notifcount = parseInt($('#unreadGlobalNotification').find('.notifcount').text())+1;\n\t    }\n\n\t    $('#unreadGlobalNotification').html('').append($(span).text(notifcount));\n\n\t    if(notification.type == 1)\n\t    {\n\n\t      $('#myGlobalNotifications').prepend(\n\t        $('<li>')\n\t        .append(\n\t          $('<a href=\"'+BASE_URL+'/'+notification.game.slug+'\">').addClass('unread')\n\t          .append(\n\t            $('<p>')\n\t            .append(\n\t              $('<span>').text('New Game has Added!')\n\t            )\n\t          )\n\t        )\n\t      );\n\n\t    }\n\t    else if(notification.type == 2)\n\t    {\n\n\t      $('#myGlobalNotifications').prepend(\n\t        $('<li>')\n\t        .append(\n\t          $('<a href=\"'+BASE_URL+'/clubhouse/chatroom/'+notification.room.name+'\">').addClass('unread')\n\t          .append(\n\t            $('<p>')\n\t            .append(\n\t              $('<span>').text('New Chatroom Created!')\n\t            )\n\t          )\n\t        )\n\t      );\n\n\t    }\n\t    else if(notification.type == 3)\n\t    {\n\n\t      $('#myGlobalNotifications').prepend(\n\t        $('<li>')\n\t        .append(\n\t          $('<a href=\"'+BASE_URL+'/clubhouse/chatroom/'+notification.room.name+'\">').addClass('unread')\n\t          .append(\n\t            $('<p>')\n\t            .append(\n\t              $('<span>').text(notification.moderator.user_detail.firstname+' '+notification.moderator.user_detail.lastname+' is now in '+notification.room.name)\n\t            )\n\t          )\n\t        )\n\t      );\n\t    }\n\t    else if(notification.type == 4)\n\t    {\n\n\t      $('#myGlobalNotifications').prepend(\n\t        $('<li>')\n\t        .append(\n\t          $('<a href=\"//'+ notification.custom_notification.link +' \">').addClass('unread')\n\t          .append(\n\t            $('<p>')\n\t            .append(\n\t              $('<span>').text(notification.custom_notification.description)\n\t            )\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }\n\t});\n\n\tsocket.on('post_custom_notification', function(notification){\n\t  $.each(notification, function(){\n\t    data = this;\n\t    span = $('<span>').addClass('notifcount');\n\t    notifcount = 1;\n\t    if($('#unreadGlobalNotification').find('.notifcount').length){\n\t      notifcount = parseInt($('#unreadGlobalNotification').find('.notifcount').text())+1;\n\t    }\n\n\t    $('#unreadGlobalNotification').html('').append($(span).text(notifcount));\n\n\t    $('#myGlobalNotifications').prepend(\n\t      $('<li>')\n\t          .append(\n\t            $('<a href=\"//'+ data.custom_notification.link +' \">').addClass('unread')\n\t                  .append(\n\t                    $('<p>')\n\t                      .append(\n\t                        $('<span>').text(data.custom_notification.description)\n\t                        )\n\t                    )\n\t            )\n\t          );\n\t  });\n\t});\n\n\tsocket.on('post_addFriend_request', function(request_id, request){\n\n\t\tconsole.log('post_addFriend_request');\n\t\tconsole.log(request);\n\n\t\trequestHtml =  $('<li>').attr('id','friend-request-'+request.user_id).append(\n\t\t\t$('<a href=\"javascript:;\">').addClass('unread')\n\t\t\t.append(\n\t\t\t\t$('<img>').attr('src', request.profile_picture ? BASE_URL+'/'+request.profile_picture : defaultProfilePic )\n\t\t\t)\n\t\t\t.append(\n\t\t\t\t$('<p>')\n\t\t\t\t.append(\n\t\t\t\t\t$('<span>').addClass('name').text(request.name)\n\t\t\t\t)\n\t\t\t\t.append(\n\t\t\t\t\t$('<div>').addClass('actionList')\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<button>').text('Accept').addClass('acceptFriend').data('id', request_id).data('user', request.user_id)\n\t\t\t\t\t)\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<button>').text('Decline').addClass('declineFriend').data('id', request_id)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\n\t\tif($('#friend-request-'+request.user_id).length)\n\t\t{\n\t\t\t$('#friend-request-'+request.user_id).replaceWith(requestHtml);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnotifcount = $('#notificationMenu').find('.notifcount');\n\n\t\t\tif(notifcount.length)\n\t\t\t{\n\t\t\t\tnotifs = parseInt($(notifcount).text());\n\t\t\t\t$(notifcount).text(notifs+1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('#notificationMenu').prepend($('<span>').addClass('notifcount').text(1));\n\t\t\t}\n\n\t\t\t$('#myNotifications').prepend( requestHtml );\n\t\t}\n\t});\n\n\tsocket.on('post_private_message', function(message){\n\n\t\tconsole.log('you got a private message!');\n\t\tconsole.log(message);\n\n\t\tif($('#pmBox').data('current') == message.from.user_id && $('#pmBox').is(':visible'))\n\t\t{\n\t\t\tconsole.log('real time add');\n\n\t\t\t$('#pmMessageContent').append(\n\t\t\t\t$('<li>').append(\n\t\t\t\t\t$('<img>').attr('src', message.from.profile_picture ? BASE_URL+'/'+message.from.profile_picture : defaultProfilePic )\n\t\t\t\t)\n\t\t\t\t.append(\n\t\t\t\t\t$('<span>').text(message.message)\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t$('#pmMessageContent').animate({\n\t\t\t\tscrollTop: $('#pmMessageContent')[0].scrollHeight\n\t\t\t}, 2000);\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tif($('#inbox-user-'+message.from.user_id).length)\n\t\t\t{\n\t\t\t\t$('#inbox-user-'+message.from.user_id).find('a').addClass('unread').find('.message').text(message.message);\n\t\t\t\t$('#myMessages').prepend($('#inbox-user-'+message.from.user_id));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('#myMessages').prepend(\n\t\t\t\t\t$('<li>').attr('data-user', message.from.user_id).attr('id', 'inbox-user-'+message.from.user_id)\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<a href=\"javascript:;\">').addClass('subModalToggle pmFriend').attr('data-target', '#pmBox').addClass('unread')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<img>').attr('src', message.from.profile_picture ? BASE_URL+'/'+ message.from.profile_picture : defaultProfilePic )\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<p>')\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<span>').addClass('name').text(message.from.name)\n\t\t\t\t\t\t\t\t.append($('<span>').addClass('timestamp').text('3:36pm'))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<span>').addClass('message').text(message.message)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t$('#unreadMessageNotification').html('').append(\n\t\t\t\t$('<span>').addClass('notifcount').text($('#myMessages li a.unread').length)\n\t\t\t);\n\t\t}\n\t});\n\n\tsocket.on('open_current_room', function(room){\n\t\tif(room)\n\t\t{\n\t\t\tif($('#chatbox-'+room.id).length == 0)\n\t\t\t{\n\n\t\t\t\t$('#chatBoxPanel').append(\n\t\t\t\t\t$('<div>').addClass('chatbox-container').addClass('chatMinimized').attr('id', 'chatbox-'+room.id)\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<div>').addClass('chatbox').data('id', room.id).data('name', room.name)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<div>').addClass('inactivebox')\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<b>').text(room.name)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<span>').addClass('peopleTalking').text(room.people.length+' people talking').data('total', room.people.length)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}     \n\t\t}\n\t});\n\n\tsocket.on('rooms_opened', function(rooms){\n\n\t\tconsole.log(rooms);\n\n\t\t$.each(rooms, function(){\n\n\t\t\troom =this;\n\t\t\tconsole.log($('#chatBoxPanel'));\n\n\t\t\t/*     $('#chatBoxPanel').append(\n\t\t\t$('<div>').addClass('chatbox-container').addClass('chatMinimized').attr('id', 'chatbox-'+room.id)\n\t\t\t.append(\n\n\t\t\t$('<div>').addClass('chatbox').data('id', room.id).data('name', room.name)\n\t\t\t.append(\n\t\t\t$('<div>').addClass('inactivebox')\n\t\t\t.append(\n\t\t\t$('<b>').text(room.name)\n\t\t\t)\n\t\t\t.append(\n\t\t\t$('<span>').addClass('peopleTalking').text(room.people.length+' people talking').data('total', room.people.length)\n\t\t\t)\n\n\n\t\t\t)\n\t\t\t)\n\t\t\t);*/\n\n\t\t\t$.ajax({\n\t\t\t\turl : BASE_URL+'/chatroom/getUnreadCount',\n\t\t\t\ttype : 'POST',\n\t\t\t\tdata : { room_id : room.id, user_id : userId,  _token : CSRF_TOKEN },\n\t\t\t\tdataType : 'json',\n\t\t\t\tsuccess : function(count)\n\t\t\t\t{\n\n\t\t\t\t\ttextarea = $('<textarea>').addClass('common').attr('placeholder', 'Type Message').css('width', '100%');\n\n\t\t\t\t\t$('#chatBoxPanel').append(\n\t\t\t\t\t\t$('<div>').addClass('chatbox-container').addClass('chatMinimized').attr('id', 'chatbox-'+room.id)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<div>').addClass('chatbox').data('id', room.id).data('name', room.name)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<div>').addClass('inactivebox')\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<b>').text(room.name)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<span>').addClass('peopleTalking').text(room.people.length+' people talking').data('total', room.people.length)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<div>').addClass('activebox').css('display', 'none')\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<div>').addClass('head')\n\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t$('<h2>')\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\t$('<i>').addClass('fa fa-minus').addClass('minimizeChat')\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t// ROY: Ako sa e hide sa karon\n\n\t\t\t\t\t\t\t\t\t\t\t//.append(                    \n\t\t\t\t\t\t\t\t\t\t\t// $('<a href=\"javascript:;\">')\n\t\t\t\t\t\t\t\t\t\t\t//     .append(\n\t\t\t\t\t\t\t\t\t\t\t//       $('<i>').addClass('fa fa-times').addClass('closeChat')\n\t\t\t\t\t\t\t\t\t\t\t//       )\n\t\t\t\t\t\t\t\t\t\t\t// )\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\t$('<a href=\"javascript:;\">').text(room.name)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\t$('<span>').text(room.people.length+' people are talking now')\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<div>').addClass('body')\n\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\ttextarea\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tif(room.banned){\n\t\t\t\t\t\t$(textarea).initBan(room.banned);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(count > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#chatbox-'+room.id).find('.inactivebox')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<div>').addClass('notif').text(count)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\terror : function(xhr)\n\t\t\t\t{\n\t\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t\t}\n\t\t\t}); \n\t\t});\n\n\t});\n\n\tsocket.on('display_people', function(people, room_id){\n\t\t$('#chatbox-'+room_id).find('.peopleTalking').text(people.length+' people are talking now');\n\t\t$('#chatbox-'+room_id).find('.activebox head span').text(people.length+' people are talking now');\n\t});\n\n\tsocket.on('room_opened', function(data, banned){\n\n\t\tsocket.emit('observer_room', data.room.id);\n\t\tconsole.log('room_opened');\n\t\tconsole.log(data);    \n\n\t\tif($('#chatbox-'+data.room.id).length == 0)\n\t\t{\n\t\t\t$.ajax({\n\t\t\t\turl : BASE_URL+'/chatroom/getUnreadCount',\n\t\t\t\ttype : 'POST',\n\t\t\t\tdata : { room_id : data.room.id, user_id : userId,  _token : CSRF_TOKEN },\n\t\t\t\tdataType : 'json',\n\t\t\t\tsuccess : function(count)\n\t\t\t\t{\n\t\t\t\t\ttextarea = $('<textarea>').addClass('common').attr('placeholder', 'Type Message').css('width', '100%');\n\n\t\t\t\t\t$('#chatBoxPanel').append(\n\t\t\t\t\t\t$('<div>').addClass('chatbox-container').addClass('chatMinimized').attr('id', 'chatbox-'+data.room.id)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<div>').addClass('chatbox').data('id', data.room.id).data('name', data.room.name)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<div>').addClass('inactivebox')\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<b>').text(data.room.name)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<span>').addClass('peopleTalking').text(data.people.length+' people talking').data('total', data.people.length)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t).append(\n\t\t\t\t\t\t\t\t\t$('<div>').addClass('activebox').css('display', 'none')\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<div>').addClass('head')\n\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t$('<h2>')\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\t$('<i>').addClass('fa fa-minus').addClass('minimizeChat')\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t// ROY: Ako sa e hide sa karon\n\n\t\t\t\t\t\t\t\t\t\t\t//.append(                    \n\t\t\t\t\t\t\t\t\t\t\t// $('<a href=\"javascript:;\">')\n\t\t\t\t\t\t\t\t\t\t\t//     .append(\n\t\t\t\t\t\t\t\t\t\t\t//       $('<i>').addClass('fa fa-times').addClass('closeChat')\n\t\t\t\t\t\t\t\t\t\t\t//       )\n\t\t\t\t\t\t\t\t\t\t\t// )\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\t$('<a href=\"javascript:;\">').text(data.room.name)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\t$('<span>').text(data.people.length+' people are talking now')\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<div>').addClass('body')\n\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\ttextarea\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t);\n\n\t\t\t\t\tif(banned){\n\t\t\t\t\t\t\t$(textarea).initBan(banned);\n\t\t\t\t\t\t}\n\n\t\t\t\t\tif(count > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#chatbox-'+data.room.id).find('.inactivebox')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<div>').addClass('notif').text(count)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror : function(xhr)\n\t\t\t\t{\n\t\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t\t}\n\t\t\t});  \n\t\t} \n\t});\n\n\tsocket.on('post_chatroom_message', function(data){\n\n\t\tconsole.log('a new message from room');\n\t\tconsole.log(data);\n\n\t\tchatbox = $('#chatbox-'+data.room_id);\n\t\tif($(chatbox).length)\n\t\t{\n\n\t\t\tbody = $(chatbox).find('.body');\n\n\t\t\t$(body).append(\n\t\t\t\t$('<div>').addClass('message')\n\t\t\t\t.append(\n\t\t\t\t\t$('<div>').addClass('avatar')\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<a href=\"javascript:;\">')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<img src=\"'+( data.user.profile_picture ? BASE_URL+'/'+data.user.profile_picture : defaultProfilePic) +'\">')\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.append(\n\t\t\t\t\t$('<p>').addClass('bubble yellow').text(data.message)\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif($(chatbox).hasClass('chatMinimized') && userId != data.user.user_id)\n\t\t\t{\n\t\t\t\tif($(chatbox).find('.inactivebox').find('.notif').length)\n\t\t\t\t{\n\t\t\t\t\tlastCount = parseInt($(chatbox).find('.inactivebox').find('.notif').text());\n\t\t\t\t\t$(chatbox).find('.inactivebox').find('.notif').text(lastCount+1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$(chatbox).find('.inactivebox').append(\n\t\t\t\t\t\t$('<div>').addClass('notif').text(1)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tsocket.on('force_minimizeChat', function(room_id){\n\t\tchatbox = $('#chatbox-'+room_id).find('.chatbox');\n\t\tif(chatbox.length)\n\t\t{\n\t\t\tminimizeChat(chatbox);\n\t\t}\n\t});\n\n\tsocket.on('force_closeChat', function(room_id){\n\n\t\tchatbox = $('#chatbox-'+room_id).find('.chatbox');\n\t\tif(chatbox.length)\n\t\t{\n\t\t\tcloseChat(chatbox);\n\t\t\tsocket.emit('leaveChat', room_id);\n\t\t}\n\t});\n\n\tsocket.on('force_maximizeChat', function(room_id){\n\t\tchatbox = $('#chatbox-'+room_id).find('.chatbox');\n\t\tif(chatbox.length)\n\t\t{\n\t\t\tmaximizeChat(chatbox);\n\t\t}\n\t});\n\n\n\t//END SOCKET ON\n\n\t// EVENTS\n\n\t$('#globalNotifMenu').on('click', function(){\n\t\t$('#unreadGlobalNotification').html('');\n\t});\n\n\t$('#globalNotifMenu').one('click', function(e){\n\n\tbutton = this;\n\n\t$('#myGlobalNotifications').html('').append($('<li style=\"border:none;\">').addClass('loading').append('<div class=\"typing-indicator\"><span></span><span></span><span></span></div><p> Loading... </p>'));\n\n\t\t$.ajax({\n\t\turl : notifUrl+'/getGlobalNotifications',\n\t\tdata : {  _token : CSRF_TOKEN },\n\t\tdataType : 'json',\n\t\ttype : 'POST',\n\t\tsuccess : function(data)\n\t\t{\n\t\t  console.log('getGlobalNotifications');\n\t\t  console.log(data);\n\n\t\t  $(button).bind('click', readGlobalNotification);\n\n\t\t  readGlobalNotification();\n\n\t\t  $('#myGlobalNotifications').html('');\n\n\t\t  $.each(data, function(){\n\n\t\t    notification = this;\n\n\t\t    li = $('<li>');\n\n\t\t    if(notification.type == 1)\n\t\t    {\n\n\t\t      $('#myGlobalNotifications').append(\n\t\t        $(li)\n\t\t        .append(\n\t\t          $('<a href=\"'+BASE_URL+'/'+notification.game.slug+'\">')\n\t\t          .append(\n\t\t            $('<p>')\n\t\t            .append(\n\t\t              $('<span>').text('New Game has Added!')\n\t\t            )\n\t\t          )\n\t\t        )\n\t\t      );\n\n\t\t    }\n\t\t    else if(notification.type == 2)\n\t\t    {\n\n\t\t      $('#myGlobalNotifications').append(\n\t\t        $(li)\n\t\t        .append(\n\t\t          $('<a href=\"'+BASE_URL+'/clubhouse/chatroom/'+notification.room.name+'\">')\n\t\t          .append(\n\t\t            $('<p>')\n\t\t            .append(\n\t\t              $('<span>').text('New Chatroom Created!')\n\t\t            )\n\t\t          )\n\t\t        )\n\t\t      );\n\n\t\t    }\n\t\t    else if(notification.type == 3)\n\t\t    {\n\n\t\t      $('#myGlobalNotifications').append(\n\t\t        $(li)\n\t\t        .append(\n\t\t          $('<a href=\"'+BASE_URL+'/clubhouse/chatroom/'+notification.room.name+'\">')\n\t\t          .append(\n\t\t            $('<p>')\n\t\t            .append(\n\t\t              $('<span>').text(notification.moderator.user_detail.firstname+' '+notification.moderator.user_detail.lastname+' is now in '+notification.room.name)\n\t\t            )\n\t\t          )\n\t\t        )\n\t\t      );\n\t\t    }\n\t\t    else if(notification.type == 4)\n\t\t    {\n\n\t\t      $('#myGlobalNotifications').append(\n\t\t        $(li)\n\t\t        .append(\n\t\t          $('<a href=\"//'+ notification.custom_notification.link +' \">')\n\t\t          .append(\n\t\t            $('<p>')\n\t\t            .append(\n\t\t              $('<span>').text(notification.custom_notification.description)\n\t\t            )\n\t\t          )\n\t\t        )\n\t\t      );\n\n\t\t    }\n\n\n\t\t    if(!notification.globalnotification_read)\n\t\t    {\n\t\t    $(li).find('a').addClass('unread');\n\t\t    }\n\n\n\t\t  });\n\n\t\t},\n\t\terror : function(xhr)\n\t\t{\n\t\t  console.log(xhr.responseText);\n\t\t}\n\t\t});\n\t});\n\n\t$(document).on('click','.pmFriend', function(){\n\t\t$('.pmBox').css('display','block');\n\t\t$('.messageNotifBox ').hide();\n\t});\n\n\t$('#notificationMenu').on('click', function(){\n\n\t\t$('#notificationMenu').find('.notifcount').remove();\n\n\t});\n\n\t$('#notificationMenu').one('click', function(){\n\n\t\ttheButton = this;\n\n\t\t$('#myNotifications').html('').append($('<li style=\"border:none;\">').addClass('loading').append('<div class=\"typing-indicator\"><span></span><span></span><span></span></div><p> Loading... </p>'));\n\n\t\t$.ajax({\n\t\t\turl : profileUrl+'/getFriendRequests',\n\t\t\tdata : { user_id : userId, _token : CSRF_TOKEN },\n\t\t\tdataType : 'json',\n\t\t\ttype : 'POST',\n\t\t\tsuccess : function(data)\n\t\t\t{\n\t\t\t\tconsole.log('getFriendRequests');\n\t\t\t\tconsole.log(data);\n\n\t\t\t\tif(data)\n\t\t\t\t{\n\t\t\t\t\treadUserNotifications();\n\t\t\t\t\t$(theButton).bind('ckick', readUserNotifications);\n\t\t\t\t}\n\n\t\t\t\t$('#myNotifications').html('');\n\n\t\t\t\t$.each(data, function(){\n\n\t\t\t\t\tli = $('<li>');\n\n\t\t\t\t\trequest = this;\n\n\t\t\t\t\tif(request.type == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbutton = $('<a href=\"javascript:;\">')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<img>').attr('src', request.user.user_detail.profile_picture ? BASE_URL+'/'+request.user.user_detail.profile_picture : defaultProfilePic )\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<p>')\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<span>').addClass('name').text(request.user.user_detail.firstname+' '+request.user.user_detail.lastname)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<div>').addClass('actionList')\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<button>').text('Accept').addClass('acceptFriend').data('id', request.id).data('user', request.user_id)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<button>').text('Decline').addClass('declineFriend').data('id', request.id)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t$(li).attr('id', 'friend-request-'+request.user_id).append(\n\t\t\t\t\t\tbutton\n\t\t\t\t\t\t);     \n\n\t\t\t\t\t}\n\t\t\t\t\telse if(request.type == 1)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(li).append(\n\t\t\t\t\t\t\t$('<a href=\"javascript:;\">')\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<img>').attr('src', request.user.profile_picture ? BASE_URL+'/'+request.user.profile_picture : defaultProfilePic )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<p>')\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<span>').addClass('name').text('You and '+request.user.user_detail.firstname+' '+request.user.user_detail.lastname+' are now friends!')\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<div>').addClass('actionList').data('user', request.user.user_detail.user_id)\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<button>').text('Message').addClass('subModalToggle pmFriend').attr('data-target', '#pmBox')\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\t\t\t\t\telse if(request.type == 2)\n\t\t\t\t\t{\n\n\t\t\t\t\t\t$(li).append(\n\t\t\t\t\t\t\t$('<a href=\"'+BASE_URL+'/'+request.game.slug+'\">')\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<img>').attr('src', request.user.user_detail.profile_picture ? BASE_URL+'/'+request.user.user_detail.profile_picture : defaultProfilePic )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<p>')\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<span>').addClass('name').text(request.user.user_detail.firstname+' '+request.user.user_detail.lastname+' recommended you to play. ')\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<div>').addClass('actionList')\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<span>').text('Click to Play')\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(request.read == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(li).find('a').addClass('unread');\n\t\t\t\t\t}\n\n\t\t\t\t\t$('#myNotifications').append(li);\n\n\t\t\t\t});\n\n\t\t\t},\n\t\t\terror : function(xhr)\n\t\t\t{\n\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$('#sendPrivateMessage').on('submit', function(e){\n\n\t\te.preventDefault();\n\t\ttheUser = $(this).data('user');\n\t\tmessage = $('#privateMessageTextarea').val();\n\n\t\t$('#privateMessageTextarea').val('');\n\n\t\tif(theUser && message)\n\t\t{\n\n\t\t\t$('#pmMessageContent').append(\n\t\t\t\t$('<li>').addClass('alt').append(\n\t\t\t\t\t$('<span>').addClass('alt').text(message)\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t$('#pmMessageContent').animate({\n\t\t\t\tscrollTop: $('#pmMessageContent')[0].scrollHeight\n\t\t\t}, 200);\n\n\t\t\t$.ajax({\n\t\t\t\turl : messageUrl+'/sendPrivateMessage',\n\t\t\t\tdata : { from : userId, to : theUser, message : message, _token : CSRF_TOKEN },\n\t\t\t\ttype : 'POST',\n\t\t\t\tdataType : 'json',\n\t\t\t\tsuccess : function(data)\n\t\t\t\t{\n\t\t\t\t\tsocket.emit('send_private_message', { to : theUser, message : message });\n\t\t\t\t},\n\t\t\t\terror : function(xhr)\n\t\t\t\t{\n\t\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t\t\t// message is not send resend?\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\t$('.chatCommon').each(function(){\n\n\t\tvar txt = $(this),\n\t\t\thiddenDiv = $(document.createElement('div')),\n\t\t\tcontent = null;\n\n\t\ttxt.addClass('txtstuff');\n\t\thiddenDiv.addClass('hiddendiv common');\n\n\t\t$('body').append(hiddenDiv);\n\n\t\ttxt.on('keyup', function (e) {\n\n\t\t\tif (e.keyCode == 13) \n\t\t\t{\n\t\t\t\t$(txt).parent('form').submit();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontent = $(this).val();\n\t\t\t\tcontent = content.replace(/\\n/g, '<br>');\n\t\t\t\thiddenDiv.html(content + '<br class=\"lbr\">');\n\t\t\t\t$(this).css('height', hiddenDiv.height());\n\t\t\t}\n\n\t\t});\n\n\t});\n\n\t$(document).on('click', '.pmFriend', function(){\n\n\t\tmodal = $('#pmBox');\n\n\t\t$(this).removeClass('unread');\n\n\t\tif(!modal.hasClass('loading'))\n\t\t{\n\t\t\t$(modal).addClass('loading');\n\t\t\ttheUser = $(this).parent().data('user');\n\t\t\t$('#pmBox').attr('data-current', theUser);\n\t\t\t$('#sendPrivateMessage').data('user', theUser);\n\t\t\t$(modal).find('.divContainer').hide();\n\n\t\t\tloading = $('<div>').addClass('loadContainer').append('<div class=\"typing-indicator\"><span></span><span></span><span></span></div><p> Loading... </p>');\n\n\t\t\t$(modal).append(loading);\n\t\t\t$('#pmMessageContent').html('');\n\n\t\t\t$.ajax({\n\t\t\t\turl : messageUrl+'/getPrivateMessages',\n\t\t\t\tdata : { user_id : userId , other_person : theUser , _token : CSRF_TOKEN },\n\t\t\t\tdataType : 'json',\n\t\t\t\ttype : 'POST',\n\t\t\t\tsuccess : function(data)\n\t\t\t\t{\n\t\t\t\t\t$('#unreadMessage').text('('+data['unread']+')');\n\t\t\t\t\t$('#readMessage').text('('+data['read']+')');\n\n\t\t\t\t\t$(modal).find('.divContainer').show();\n\t\t\t\t\t$(loading).remove();\n\t\t\t\t\tmodal.removeClass('loading');\n\n\t\t\t\t\t$('#pmName').text( data.other_person.user_detail.firstname +' '+ data.other_person.user_detail.lastname);\n\n\t\t\t\t\tif(data.conversation && data.conversation.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$.each(data.conversation, function(){\n\n\t\t\t\t\t\t\tli = $('<li>');\n\n\t\t\t\t\t\t\tspan = $('<span>').text(this.message);\n\n\t\t\t\t\t\t\tif(this.from != userId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$(li).append(                        \n\t\t\t\t\t\t\t\t\t$('<img>').attr('src', data.other_person.user_detail.profile_picture ? BASE_URL+'/'+data.other_person.user_detail.profile_picture : defaultProfilePic )                        \n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$(li).addClass('alt');\n\t\t\t\t\t\t\t\t$(span).addClass('alt');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$('#pmMessageContent').append(\n\t\t\t\t\t\t\tli.append(span)\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\terror : function(xhr)\n\t\t\t\t{\n\t\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n  \n\t$('#myNotifications').on('click', '.acceptFriend', function(){\n\n\t\tdata_id = $(this).data('id');\n\t\tuser = $(this).data('user');\n\n\t\t$(this).parents('li').find('.actionList').html('')\n\n\t\t.append(\n\t\t\t$('<span>').text('Request accepted! ').css('font-size', '12px').data('user', user)\n\t\t\t.append(\n\t\t\t\t$('<button>').text('Message').addClass('subModalToggle pmFriend').attr('data-target', '#pmBox')\n\t\t\t)\n\t\t);\n\n\t\t$.ajax({\n\t\t\turl : friendUrl+'/acceptFriendRequest',\n\t\t\tdata : { _token : CSRF_TOKEN, id : data_id },\n\t\t\ttype : 'POST',\n\t\t\tdataType : 'json',\n\t\t\tsuccess : function(data)\n\t\t\t{\n\t\t\t\tif(data)\n\t\t\t\t{\n\t\t\t\t\tsocket.emit('friend_request_accepted', { other_person : user });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror : function (xhr)\n\t\t\t{\n\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t}\n\t\t});\n\t});\n  \n\t$('#myNotifications').on('click', '.declineFriend', function(){\n\n\t\tdata_id = $(this).data('id');\n\n\t\t$(this).parents('li').remove();\n\n\t\t$.ajax({\n\t\t\turl : friendUrl+'/cancelFriendRequest',\n\t\t\tdata : { _token : CSRF_TOKEN, id : data_id },\n\t\t\ttype : 'POST',\n\t\t\tdataType : 'json',\n\t\t\tsuccess : function(data)\n\t\t\t{\n\t\t\t\tconsole.log(data);\n\t\t\t},error : function (xhr)\n\t\t\t{\n\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t}\n\t\t});\n\t});\n\n\t$('#messagesMenu').one('click', function(){\n\n\t\t$('#myMessages').html('').append($('<li style=\"border:none;\">').addClass('loading').append('<div class=\"typing-indicator\"><span></span><span></span><span></span></div><p> Loading... </p>'));\n\n\t\t$.ajax({\n\t\t\turl : messageUrl+'/getInbox',\n\t\t\tdata : { user_id : userId, _token : CSRF_TOKEN },\n\t\t\tdataType : 'json',\n\t\t\ttype : 'POST',\n\t\t\tsuccess : function(data)\n\t\t\t{\n\t\t\t\tsortDates = data.sort(function(a, b){\n\t\t\t\t\treturn new Date(a.created_at) < new Date(b.created_at);\n\t\t\t\t});\n\n\t\t\t\tunread_messages = [];\n\t\t\t\tread_messages = [];\n\n\t\t\t\t$.each(sortDates, function(){\n\n\t\t\t\t\tif(this.read == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tunread_messages.push(this);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tread_messages.push(this);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tinbox = unread_messages.concat(read_messages);\n\n\t\t\t\t$('#myMessages').html('');\n\n\t\t\t\t$.each(inbox, function(){\n\n\t\t\t\t\tmsg = this;\n\n\t\t\t\t\tbutton = $('<a href=\"javascript:;\">').addClass('subModalToggle pmFriend').attr('data-target', '#pmBox')\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<img>').attr('src', msg.from_user.user_detail.profile_picture ? BASE_URL+'/'+ msg.from_user.user_detail.profile_picture : defaultProfilePic )\n\t\t\t\t\t)\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<p>')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<span>').addClass('name').text(msg.from_user.user_detail.firstname+' '+msg.from_user.user_detail.lastname)\n\t\t\t\t\t\t\t.append($('<span>').addClass('timestamp').text('3:36pm'))\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<span>').addClass('message').text(msg.message)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tif(msg.read == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(button).addClass('unread');\n\t\t\t\t\t}\n\n\t\t\t\t\t$('#myMessages').append(\n\t\t\t\t\t\t$('<li>').attr('id', 'inbox-user-'+msg.from_user.user_detail.user_id).attr('data-user', msg.from_user.user_detail.user_id)\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t},\n\t\t\terror : function(xhr)\n\t\t\t{\n\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t}\n\t\t});\n\t});\n\n\t$('#myMessages').on('click', 'li a', function(){\n\t\t$('#unreadMessageNotification').html('');\n\t});\n\n\t$('#messagesMenu').on('click', function(){\n\t\t$('#unreadMessageNotification').html('');\n\t});\n\n\t$('#userMenu').click(function(){\n\t\t$('.profileBox').toggle();\n\t});\n\n\t$('#messagesMenu').click(function(){\n\t\t$('.messageNotifBox').toggle();\n\t\t$('.globalNotifBox ').hide();\n\t\t$('.notificationBox ').hide();\n\t});\n\n\n\t$('#globalNotifMenu').click(function(){\n\t\t$('.globalNotifBox').toggle();\n\t\t$('.messageNotifBox ').hide();\n\t\t$('.notificationBox ').hide();\n\t});\n\n\t$('#notificationMenu').click(function(){\n\t\t$('.notificationBox').toggle();\n\t\t$('.globalNotifBox ').hide();\n\t\t$('.messageNotifBox ').hide();\n\t});\n\n\n\t$('.messageBox ul').slimScroll({\n\t\theight: '366px',\n\t\tstart: 'bottom'\n\t});\n\n\t$('#chatBoxPanel').on('click', '.minimizeChat', function(e){\n\n\t\te.stopPropagation();\n\t\tchatbox = $(this).parents('.chatbox');\n\t\troom_id = $(chatbox).data('id');\n\t\tminimizeChat(chatbox);\n\t\tsocket.emit('chat_minimized', room_id);\n\t});\n\n\t$('#chatBoxPanel').on('click', '.closeChat', function(e){\n\t\te.stopPropagation();\n\t\tchatbox = $(this).parents('.chatbox');\n\t\troom_id = $(chatbox).data('id');\n\t\tcloseChat(chatbox);\n\t\tsocket.emit('stop_observing', room_id);\n\t});\n\n\t$('#chatBoxPanel').on('keydown', 'textarea', function(e){\n\n\t\tif(e.keyCode == 13)\n\t\t{\n\t\t\tmessage = $(this).val();\n\t\t\tchatbox = $(this).parents('.chatbox');\n\t\t\troom_id = $(chatbox).data('id');\n\n\t\t\tif(message && userId && room_id)\n\t\t\t{\n\t\t\t\t$(this).val('');\n\t\t\t\tbody = $(this).parents('.activebox').find('.body');\n\n\t\t\t\tconsole.log(body);\n\n\t\t\t\t$(body).append(\n\t\t\t\t\t$('<div>').addClass('message')\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<div>').addClass('avatar')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<a href=\"javascript:;\">')\n\t\t\t\t\t\t\t// .append(\n\t\t\t\t\t\t\t//   $('<img src=\"img/assets/chat-avatar-shine.png\">').addClass('shine')\n\t\t\t\t\t\t\t//   )\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<img src=\"'+( userImage ? BASE_URL+'/'+userImage : defaultProfilePic) +'\">')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.append(\n\t\t\t\t\t\t$('<p>').addClass('bubble yellow').text(message)\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl : BASE_URL+\"/chatroom/postMessage\",\n\t\t\t\t\ttype : 'POST',\n\t\t\t\t\tdata : { user_id : userId , message : message, room_id : room_id , _token : CSRF_TOKEN },\n\t\t\t\t\tdataType : 'json',\n\t\t\t\t\tsuccess : function(data)\n\t\t\t\t\t{\n\t\t\t\t\t\tsocket.emit('send_chatroom_message', room_id, message );\n\t\t\t\t\t},\n\t\t\t\t\terror : function(xhr)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tscrollDownChatBody();\n\t\t\t}\n\t\t}\n\n\t});\n\n\t$('#chatBoxPanel').on('keyup', 'textarea', function(e){\n\t\tif(e.keyCode == 13)\n\t\t{\n\t\t\t$(this).val('');\n\t\t}\n\t});\n\n\n\t$('#chatBoxPanel').on('click','.chatbox', function(e){\n\t\troom_id = $(this).data('id');\n\t\tmaximizeChat(this);\n\t\tif(room_id)\n\t\t{\n\t\t\tsocket.emit('chat_maximized', room_id);\n\t\t}\n\t});\n\n\t$(\".categ-button\").click(function(){\n\t\t$(\".categ-entries\").fadeToggle();\n\t});\n\n\t$('body').on('click', function(e){\n\n\t\tif( $('.categ-entries').is(':visible') && ( !$(e.target).hasClass('categ-entries') && !$(e.target).hasClass('categ-button')))\n\t\t{\n\t\t\t$(\".categ-entries\").fadeOut();\n\t\t} \n\n\t});\n\n\t// END EVENTS\n\n\t// FUNCTIONS\n\n\tfunction readGlobalNotification(){\n\t\t$.ajax({\n\t\t  url : notifUrl+'/readGlobalNotifications',\n\t\t  data : { _token : CSRF_TOKEN },\n\t\t  dataType : 'json',\n\t\t  type : 'POST',\n\t\t  success : function(data)\n\t\t  {\n\t\t    console.log('readGlobalNotification');\n\t\t    console.log(data);\n\t\t  },\n\t\t  error : function(xhr)\n\t\t  {\n\t\t    console.log(xhr.responseText);\n\t\t  }\n\t\t});\n\t}\n\n\tfunction readUserNotifications(){\n\t\t$.ajax({\n\t\t\turl : profileUrl+'/readFriendRequests',\n\t\t\tdata : { user_id : userId, _token : CSRF_TOKEN },\n\t\t\tdataType : 'json',\n\t\t\ttype : 'POST',\n\t\t\tsuccess : function(data)\n\t\t\t{\n\t\t\t \n\t\t\t console.log('readFriendRequests');\n\t\t\t console.log(data);\n\n\t\t\t},\n\t\t\terror : function(xhr)\n\t\t\t{\n\t\t\t  console.log(xhr.responseText);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction minimizeChat(chatbox){\n\n\t\tconsole.log('minimizeChat');\n\t\tchatbox.find('.inactivebox').css('display', 'block');\n\t\tchatbox.find('.activebox').css('display', 'none');\n\t\tchatbox.parent().removeClass('chatMaximized').addClass('chatMinimized');\n\t}\n\n\tfunction maximizeChat(chatbox){\n\n\t\troom_id = $(chatbox).data('id');\n\t\troom_name = $(chatbox).data('name');\n\t\tpeopleTalking = $(chatbox).find('.peopleTalking').data('total');\n\t\t$(chatbox).find('.notif').remove();\n\t\t$(chatbox).parent().removeClass('chatMinimized').addClass('chatMaximized');\n\n\n\t\tif(room_id)\n\t\t{\n\n\t\t\t$.ajax({\n\t\t\t\turl : BASE_URL+'/chatroom/userChatRead',\n\t\t\t\ttype : 'POST',\n\t\t\t\tdata : { user_id : userId, room_id : room_id, _token : CSRF_TOKEN },\n\t\t\t\tdataType : 'json',\n\t\t\t\tsuccess : function(data)\n\t\t\t\t{\n\t\t\t\t\t// console.log(data);\n\t\t\t\t\tconsole.log('User is looged in')\n\t\t\t\t},\n\t\t\t\terror : function(xhr)\n\t\t\t\t{\n\t\t\t\t\tconsole.log('User is not logged in');\n\t\t\t\t\t// console.log(xhr.responseText);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(chatbox).find('.inactivebox').hide();\n\n\t\t\tif($(chatbox).find('.activebox .message').length > 0)\n\t\t\t{\n\t\t\t\t$(chatbox).find('.activebox').show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(chatbox).find('.activebox').show();\n\t\t\t\tbody = $(chatbox).find('.body');\n\n\t\t\t\tif(!userId)\n\t\t\t\t{\n\n\t\t\t\t\t$(chatbox).find('.activebox textarea')\n\t\t\t\t\t.replaceWith(\n\t\t\t\t\t\t$('<div>').addClass('joinBox')\n\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t$('<a href=\"'+BASE_URL+'/login\">').addClass('join').text('Join Chat')\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl : BASE_URL+'/room/getRoomMessages',\n\t\t\t\t\tdata : { room_id : room_id, _token : CSRF_TOKEN },\n\t\t\t\t\ttype : 'POST',\n\t\t\t\t\tdataType : 'json',\n\t\t\t\t\tsuccess : function(data)\n\t\t\t\t\t{\n\t\t\t\t\t\t$.each(data, function(){\n\t\t\t\t\t\t\t$(body)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<div>').addClass('message')\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t$('<div>').addClass('avatar')\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t$('<a href=\"javascript:;\">')\n\t\t\t\t\t\t\t\t\t\t// .append(\n\t\t\t\t\t\t\t\t\t\t//   $('<img src=\"img/assets/chat-avatar-shine.png\">').addClass('shine')\n\t\t\t\t\t\t\t\t\t\t//   )\n\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t$('<img src=\"'+( this.user.user_detail.profile_picture ? BASE_URL+'/'+this.user.user_detail.profile_picture : defaultProfilePic) +'\">')\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$('<p>').addClass('bubble yellow').text(this.message)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tscrollDownChatBody();\n\t\t\t\t\t},\n\t\t\t\t\terror : function(xhr)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(xhr.responseText);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\n\t}\n\n\tfunction closeChat(chatbox){\n\n\t\t$(chatbox).parent('.chatbox-container').remove();\n\n\t}\n\n\tfunction scrollDownChatBody(){\n\n\t\t$('#chatBoxPanel').find('.body').scrollTop($('#chatBoxPanel').find('.body')[0].scrollHeight);\n\t}\n\n\t// END FUNCTIONS\n\n});","/* \n *   jQuery LazyImage Plugin 1.0.3\n *   https://github.com/dnasir/jquery-lazyimage\n *\n *   Copyright 2013, Dzulqarnain Nasir\n *   http://dnasir.com\n *\n *   Licensed under the MIT license:\n *   http://www.opensource.org/licenses/MIT\n */\n\n(function ($, window) {\n    var $window = $(window);\n\n    // Helpers\n    function isInViewport(el) {\n        var viewport = {\n            top: $window.scrollTop(),\n            left: $window.scrollLeft()\n        };\n        viewport.right = viewport.left + $window.width();\n        viewport.bottom = viewport.top + $window.height();\n\n        var bounds = el[0].getBoundingClientRect();\n        bounds.right = bounds.left + el.outerWidth();\n        bounds.bottom = bounds.top + el.outerHeight();\n\n        return (\n            !(viewport.right < bounds.left\n                || viewport.left > bounds.right\n                || viewport.bottom < bounds.top\n                || viewport.top > bounds.bottom)\n            && el.is(':visible')\n            );\n    }\n\n    // LazyImage constructor\n    $.LazyImage = function(img) {\n        this.$img = $(img);\n        this.loading = false;\n        this.originalSrc = this.$img.data('src');\n        this.fadeIn = this.$img.data('fade-in');\n        this.init();\n    };\n\n    // Public methods\n    $.LazyImage.prototype = {\n        init: function () {\n            var self = this,\n                fadeIn = this.fadeIn;\n\n            self.$fakeImg = $('<img />')\n                .on('load', function() {\n                    self.$img\n                        .removeAttr('style')\n                        .css('opacity', 0)\n                        .attr('src', $(this).attr('src'));\n\n                    if (fadeIn) {\n                        self.$img.animate({ opacity: 1 });\n                    } else {\n                        self.$img.css({ opacity: 1 });\n                    }\n\n                    self.$img.addClass('lazy-loaded');\n                })\n                .on('load error', function (e) {\n                    self.loading = false;\n                    self.$img.trigger('lazyLoaded', [self, e.type]);\n                });\n        },\n\n        loadImage: function () {\n            this.$fakeImg.attr('src', this.originalSrc);\n        },\n\n        destroy: function() {\n            $(this).data('plugin_lazyImage', undefined);\n            \n        }\n    };\n\n    // jQuery interface\n    $.fn.lazyImage = function () {\n        // Build array of LazyImage objects\n        var images = this.filter('img').map(function () {\n                var image = new $.LazyImage(this);\n                $(this).data('plugin_lazyImage', image);\n                return image;\n            });\n        \n        function update() {\n            $.each(images, function () {\n                // Load images when it's visible in the viewport\n                if (isInViewport(this.$img) && !this.loading) {\n                    this.loading = true;\n                    this.loadImage();\n                }\n            });\n\n            // Once all images have been processed, remove event handler\n            if(images.length <= 0) {\n                $window.off('load scroll resize', update);\n            }\n        }\n\n        // Remove images that have been loaded from array\n        $(this).on('lazyLoaded', function (e, image) {\n            images = images.filter(function() {\n                return this.originalSrc != image.originalSrc;\n            });\n        });\n\n        // Set up event handler\n        $window.on('load scroll resize', update);\n\n        // Return original object to maintain chainability\n        return this;\n    };\n})(jQuery, window);"],"sourceRoot":"/source/"}